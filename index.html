<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- GitHub Pages SEO & Social Sharing -->
    <title>Born a Crime: Vocabulary Mastery Game</title>
    <meta name="description" content="An interactive vocabulary learning game for ESL students based on Trevor Noah's 'Born a Crime'.">
    <meta property="og:title" content="Born a Crime: Vocabulary Mastery Game">
    <meta property="og:description" content="äº’å‹•å¼ ESL è©å½™å­¸ç¿’éŠæˆ² - å¹«åŠ©å­¸ç”ŸæŒæ¡ã€ŠBorn a Crimeã€‹ç¬¬ 12 ç« çš„æ ¸å¿ƒè©å½™èˆ‡å…§å®¹ç†è§£ã€‚">
    <meta property="og:type" content="website">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden-translation {
            color: transparent;
            background-color: #374151;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 4px;
            user-select: none;
        }
        .hidden-translation:hover {
            background-color: #4b5563;
        }
        .revealed {
            color: inherit !important;
            background-color: transparent !important;
        }
        .quiz-card {
            display: none;
        }
        .quiz-card.active {
            display: block;
            animation: slideIn 0.4s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* é˜²æ­¢è¡Œå‹•ç«¯é»æ“Šè—è‰²é«˜äº® */
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="bg-gray-900 font-sans text-gray-100 pb-20 selection:bg-blue-500 selection:text-white">

    <!-- Game Header -->
    <header class="bg-blue-800 text-white py-10 px-6 mb-8 text-center shadow-2xl relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
            <div class="grid grid-cols-6 gap-4 rotate-12">
                <div class="text-4xl">ğŸ“š</div><div class="text-4xl">âš¡</div><div class="text-4xl">ğŸ§ </div>
                <div class="text-4xl">ğŸŒ±</div><div class="text-4xl">ğŸš€</div><div class="text-4xl">ğŸ”¥</div>
            </div>
        </div>
        <h1 class="text-4xl md:text-6xl font-black mb-2 tracking-tighter italic">LEXICAL EVOLUTION</h1>
        <p class="text-blue-200 text-lg uppercase tracking-widest font-bold">ç²¾é€šèªè¨€éœ€è¦è€å¿ƒèˆ‡ä¸æ‡ˆçš„åŠªåŠ›</p>
        
        <!-- Score Bar -->
        <div class="max-w-md mx-auto mt-8 bg-blue-950 rounded-full h-8 p-1 border border-blue-700 relative">
            <div id="progressBar" class="bg-gradient-to-r from-blue-600 to-blue-400 h-full rounded-full transition-all duration-500" style="width: 0%"></div>
            <div class="absolute inset-0 flex items-center justify-center text-xs font-black">
                å¿ƒæ™ºé€²åŒ–é€²åº¦: <span id="currentXP">0</span> / 170
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4">
        
        <!-- Part 1: Study Zone -->
        <section id="studyZone" class="mb-12 bg-gray-800 rounded-3xl p-8 border-2 border-gray-700 shadow-xl">
            <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                <h2 class="text-2xl font-bold text-blue-400">ğŸ“– ç¬¬ä¸€éšæ®µï¼šæ·±åº¦è¨˜æ†¶ (Study Zone)</h2>
                <button onclick="revealAll()" class="w-full md:w-auto text-sm bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-full transition border border-gray-600">
                    é»æ“Šé¡¯ç¤º/éš±è—ç¿»è­¯
                </button>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-3 text-sm">
                <!-- Restored Word Items -->
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">affliction</span><span class="hidden-translation translation-text text-gray-300">æŠ˜ç£¨ã€ç—›è‹¦çš„äº‹</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">acne</span><span class="hidden-translation translation-text text-gray-300">é’æ˜¥ç—˜ / ç—¤ç˜¡</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">allergic reaction</span><span class="hidden-translation translation-text text-gray-300">éæ•åæ‡‰</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">pimple</span><span class="hidden-translation translation-text text-gray-300">ä¸˜ç–¹ã€å°ç—˜ç—˜</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">forehead</span><span class="hidden-translation translation-text text-gray-300">é¡é ­</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">ravage</span><span class="hidden-translation translation-text text-gray-300">è¹‚èºªã€åš´é‡æ¯€å£</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">decent haircut</span><span class="hidden-translation translation-text text-gray-300">åƒæ¨£çš„é«®å‹</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">unruly afro</span><span class="hidden-translation translation-text text-gray-300">è“¬äº‚çš„çˆ†ç‚¸é ­</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">blazer</span><span class="hidden-translation translation-text text-gray-300">è¥¿è£å¤–å¥— / åˆ¶æœ</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">baggy</span><span class="hidden-translation translation-text text-gray-300">é¬†å®çš„ / å¯¬å¤§çš„</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">flop</span><span class="hidden-translation translation-text text-gray-300">æ‹å—’æ‹å—’åœ°è·³å‹•</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">Murphy's law</span><span class="hidden-translation translation-text text-gray-300">è«éå®šå¾‹</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">awkward-looking</span><span class="hidden-translation translation-text text-gray-300">çœ‹èµ·ä¾†ç¬¨æ‹™çš„</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">duck feet</span><span class="hidden-translation translation-text text-gray-300">å¤–å…«å­—è…³</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">dating</span><span class="hidden-translation translation-text text-gray-300">ç´„æœƒã€äº¤å¾€</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">hang out with</span><span class="hidden-translation translation-text text-gray-300">çµäº¤ã€æ··åœ¨ä¸€èµ·</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">formula</span><span class="hidden-translation translation-text text-gray-300">å…¬å¼ã€ç¤¾äº¤è¦å¾‹</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">upset (v.)</span><span class="hidden-translation translation-text text-gray-300">æ“¾äº‚ã€æ‰“äº‚</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">a tuck-shop guy</span><span class="hidden-translation translation-text text-gray-300">è²©è³£éƒ¨ä»£è³¼è€…</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">stake their claim</span><span class="hidden-translation translation-text text-gray-300">å®£ç¤ºä¸»æ¬Š/ä½”åœ°ç›¤</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">in the interest of survival</span><span class="hidden-translation translation-text text-gray-300">ç‚ºäº†ç”Ÿå­˜èµ·è¦‹</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">the smart move</span><span class="hidden-translation translation-text text-gray-300">æ˜æ™ºä¹‹èˆ‰</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">stay on the fringe</span><span class="hidden-translation translation-text text-gray-300">å¾…åœ¨é‚Šç·£åœ°å¸¶</span></div>
                <div class="flex justify-between p-2 bg-gray-700/30 rounded-lg hover:bg-gray-700/60 transition"><span class="font-mono text-blue-300 italic">stunning</span><span class="hidden-translation translation-text text-gray-300">çµ•ç¾çš„ã€ä»¤äººé©šè‰·çš„</span></div>
            </div>
        </section>

        <!-- The Game Center -->
        <section id="gameArea" class="bg-gray-800 rounded-3xl p-8 border-4 border-blue-600 shadow-2xl min-h-[450px] relative">
            
            <!-- MISSION 1: Physical (3 Qs) -->
            <div id="mission1" class="quiz-card active">
                <div class="text-center mb-8"><span class="bg-red-500 text-white text-xs px-3 py-1 rounded-full font-bold uppercase tracking-widest">ä»»å‹™ 1ï¼šå¤–è²Œç‰¹å¯«</span></div>
                <!-- Q1-1 -->
                <div id="m1q1" class="space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"I had a giant, <span class="text-blue-400 font-bold underline">_______</span> that was impossible to comb or control."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="nextQuestion('m1q1', 'm1q2', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">unruly afro</button>
                        <button onclick="nextQuestion('m1q1', 'm1q2', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">decent haircut</button>
                    </div>
                </div>
                <!-- Q1-2 -->
                <div id="m1q2" class="hidden space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"My face was a mess. Every <span class="text-blue-400 font-bold underline">_______</span> on my forehead seemed to laugh at me."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="nextQuestion('m1q2', 'm1q3', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">pimple</button>
                        <button onclick="nextQuestion('m1q2', 'm1q3', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">allergic reaction</button>
                    </div>
                </div>
                <!-- Q1-3 -->
                <div id="m1q3" class="hidden space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"Because I stopped growing, I was stuck wearing a <span class="text-blue-400 font-bold underline">_______</span> that was far too large."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="handleMissionEnd('mission1', 'mission2', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">baggy blazer</button>
                        <button onclick="handleMissionEnd('mission1', 'mission2', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">tight shirt</button>
                    </div>
                </div>
            </div>

            <!-- MISSION 2: Social (3 Qs) -->
            <div id="mission2" class="quiz-card">
                <div class="text-center mb-8"><span class="bg-green-500 text-white text-xs px-3 py-1 rounded-full font-bold uppercase tracking-widest">ä»»å‹™ 2ï¼šç¤¾äº¤ç”Ÿå­˜</span></div>
                <!-- Q2-1 -->
                <div id="m2q1" class="space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"To avoid conflict with the cool guys, Trevor decided to <span class="text-blue-400 font-bold underline">_______</span> of every group."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="nextQuestion('m2q1', 'm2q2', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">stay on the fringe</button>
                        <button onclick="nextQuestion('m2q1', 'm2q2', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">be the leader</button>
                    </div>
                </div>
                <!-- Q2-2 -->
                <div id="m2q2" class="hidden space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"The narrator became useful to everyone as <span class="text-blue-400 font-bold underline">_______</span>, running to get food for others."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="nextQuestion('m2q2', 'm2q3', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">a tuck-shop guy</button>
                        <button onclick="nextQuestion('m2q2', 'm2q3', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">a star athlete</button>
                    </div>
                </div>
                <!-- Q2-3 -->
                <div id="m2q3" class="hidden space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"Popular boys would quickly <span class="text-blue-400 font-bold underline">_______</span> on the most attractive girls."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="handleMissionEnd('mission2', 'mission3', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">stake their claim</button>
                        <button onclick="handleMissionEnd('mission2', 'mission3', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">ignore everyone</button>
                    </div>
                </div>
            </div>

            <!-- MISSION 3: Context (3 Qs) -->
            <div id="mission3" class="quiz-card">
                <div class="text-center mb-8"><span class="bg-purple-500 text-white text-xs px-3 py-1 rounded-full font-bold uppercase tracking-widest">ä»»å‹™ 3ï¼šæ•˜äº‹æ·±åº¦</span></div>
                <!-- Q3-1 -->
                <div id="m3q1" class="space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"If anything can go wrong, it will. Trevor's dating life was a perfect example of <span class="text-blue-400 font-bold underline">_______</span>."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="nextQuestion('m3q1', 'm3q2', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">Murphy's law</button>
                        <button onclick="nextQuestion('m3q1', 'm3q2', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">the smart move</button>
                    </div>
                </div>
                <!-- Q3-2 -->
                <div id="m3q2" class="hidden space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"Trevor thought Zaheera was absolutely <span class="text-blue-400 font-bold underline">_______</span>, almost like a movie star."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="nextQuestion('m3q2', 'm3q3', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">stunning</button>
                        <button onclick="nextQuestion('m3q2', 'm3q3', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">awkward-looking</button>
                    </div>
                </div>
                <!-- Q3-3 -->
                <div id="m3q3" class="hidden space-y-6">
                    <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center"><p class="text-lg italic">"The narrator's severe acne was a painful <span class="text-blue-400 font-bold underline">_______</span> that lowered his confidence."</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="handleMissionEnd('mission3', 'mission4', true)" class="p-4 bg-gray-700 rounded-xl hover:bg-blue-600 font-bold transition">affliction</button>
                        <button onclick="handleMissionEnd('mission3', 'mission4', false)" class="p-4 bg-gray-700 rounded-xl hover:bg-red-600 font-bold transition">formula</button>
                    </div>
                </div>
            </div>

            <!-- MISSION 4: Comprehension (8 Qs) -->
            <div id="mission4" class="quiz-card">
                <div class="text-center mb-8"><span class="bg-yellow-500 text-black text-xs px-3 py-1 rounded-full font-bold uppercase tracking-widest">ä»»å‹™ 4ï¼šçµ‚æ¥µé–±è®€ç ´è­¯</span></div>
                <!-- Loop through Q1 to Q8 -->
                <div id="m4q1">
                    <h3 class="text-xl font-bold mb-4 text-center">What condition severely affected Trevor's self-esteem?</h3>
                    <div class="space-y-3">
                        <button onclick="nextQuestion('m4q1', 'm4q2', true)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-blue-600 transition">A: Acne vulgaris, which left him with pus-filled blackheads.</button>
                        <button onclick="nextQuestion('m4q1', 'm4q2', false)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-red-600 transition">B: A broken leg that prevented him from joining the sports teams.</button>
                    </div>
                </div>
                <div id="m4q2" class="hidden">
                    <h3 class="text-xl font-bold mb-4 text-center">Why did his clothing style look like a "clown"?</h3>
                    <div class="space-y-3">
                        <button onclick="nextQuestion('m4q2', 'm4q3', true)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-blue-600 transition">A: His mother bought clothes 3 sizes too big, and he never grew into them.</button>
                        <button onclick="nextQuestion('m4q2', 'm4q3', false)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-red-600 transition">B: He worked as a part-time circus performer after school.</button>
                    </div>
                </div>
                <div id="m4q3" class="hidden">
                    <h3 class="text-xl font-bold mb-4 text-center">What was his "welcome everywhere" strategy?</h3>
                    <div class="space-y-3">
                        <button onclick="nextQuestion('m4q3', 'm4q4', true)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-blue-600 transition">A: He became a nonthreatening "funny guy" who fitted in on the fringe.</button>
                        <button onclick="nextQuestion('m4q3', 'm4q4', false)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-red-600 transition">B: He bought expensive gifts for everyone using his tuck-shop money.</button>
                    </div>
                </div>
                <div id="m4q4" class="hidden">
                    <h3 class="text-xl font-bold mb-4 text-center">Who was Zaheera, and how is she described?</h3>
                    <div class="space-y-3">
                        <button onclick="nextQuestion('m4q4', 'm4q5', true)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-blue-600 transition">A: A stunning but shy Cape Malay girl who looked like Salma Hayek.</button>
                        <button onclick="nextQuestion('m4q4', 'm4q5', false)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-red-600 transition">B: The most popular athlete in school who refused to talk to Trevor.</button>
                    </div>
                </div>
                <div id="m4q5" class="hidden">
                    <h3 class="text-xl font-bold mb-4 text-center">What was his "long game" for Zaheera?</h3>
                    <div class="space-y-3">
                        <button onclick="nextQuestion('m4q5', 'm4q6', true)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-blue-600 transition">A: Stay best friends for 3 years and then ask her to the matric dance.</button>
                        <button onclick="nextQuestion('m4q5', 'm4q6', false)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-red-600 transition">B: Win the school talent show to impress her.</button>
                    </div>
                </div>
                <div id="m4q6" class="hidden">
                    <h3 class="text-xl font-bold mb-4 text-center">Why did he wait until 7:00 PM to call her?</h3>
                    <div class="space-y-3">
                        <button onclick="nextQuestion('m4q6', 'm4q7', true)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-blue-600 transition">A: To "play it cool" and not seem too desperate.</button>
                        <button onclick="nextQuestion('m4q6', 'm4q7', false)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-red-600 transition">B: Because he didn't have any money for the payphone until then.</button>
                    </div>
                </div>
                <div id="m4q7" class="hidden">
                    <h3 class="text-xl font-bold mb-4 text-center">Why did Zaheera disappear?</h3>
                    <div class="space-y-3">
                        <button onclick="nextQuestion('m4q7', 'm4q8', true)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-blue-600 transition">A: Her father got a job in America and the family emigrated.</button>
                        <button onclick="nextQuestion('m4q7', 'm4q8', false)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-red-600 transition">B: She moved to another province to attend a private boarding school.</button>
                    </div>
                </div>
                <div id="m4q8" class="hidden">
                    <h3 class="text-xl font-bold mb-4 text-center">What was the heartbreaking revelation?</h3>
                    <div class="space-y-3">
                        <button onclick="handleMissionEnd('mission4', 'results', true)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-blue-600 transition">A: That Zaheera had a "huge crush" on Trevor and was waiting for him.</button>
                        <button onclick="handleMissionEnd('mission4', 'results', false)" class="w-full text-left p-4 bg-gray-700 rounded-xl hover:bg-red-600 transition">B: That she had already left without knowing who he was.</button>
                    </div>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="results" class="quiz-card text-center">
                <h2 class="text-5xl font-black mb-4">è§£é–å¿ƒæ™ºé‡Œç¨‹ç¢‘ï¼</h2>
                <div id="finalRankBox" class="p-8 rounded-3xl bg-blue-900/50 mb-8 border-4 border-blue-400">
                    <p class="text-xl text-blue-300">ä½ çš„å¿ƒæ™ºé€²åŒ–ç­‰ç´šï¼š</p>
                    <h3 id="rankTitle" class="text-4xl md:text-5xl font-black my-4 text-white">---</h3>
                    <p id="rankDesc" class="text-gray-300 italic px-4 leading-relaxed">---</p>
                </div>
                <button onclick="location.reload()" class="bg-white text-blue-900 px-10 py-4 rounded-full font-black text-xl hover:scale-105 transition active:scale-95 shadow-lg">è¿½æ±‚æ›´é«˜å¢ƒç•Œ ğŸ”„</button>
            </div>

        </section>
    </main>

    <footer class="mt-16 text-center text-gray-400 text-sm">
        <p>ESL Learning Ecosystem â€¢ Designed for Growth</p>
        <p class="mt-2 opacity-50 italic">ã€Œå¦‚æœä½ åªåšä½ åšå¾—åˆ°çš„äº‹ï¼Œä½ æ°¸é ç„¡æ³•è¶…è¶Šç¾åœ¨çš„è‡ªå·±ã€‚ã€</p>
    </footer>

    <script>
        let totalXP = 0;

        function revealAll() {
            const translations = document.querySelectorAll('.translation-text');
            const isAnyHidden = Array.from(translations).some(t => !t.classList.contains('revealed'));
            translations.forEach(t => isAnyHidden ? t.classList.add('revealed') : t.classList.remove('revealed'));
        }

        // Toggle individual translations
        document.querySelectorAll('.hidden-translation').forEach(item => {
            item.addEventListener('click', event => {
                item.classList.toggle('revealed');
            });
        });

        function nextQuestion(hideId, showId, isCorrect) {
            if (isCorrect) totalXP += 10;
            updateProgress();
            document.getElementById(hideId).classList.add('hidden');
            document.getElementById(showId).classList.remove('hidden');
        }

        function handleMissionEnd(currentMissionId, nextMissionId, isCorrect) {
            if (isCorrect) totalXP += 10;
            updateProgress();
            setTimeout(() => {
                document.getElementById(currentMissionId).classList.remove('active');
                document.getElementById(nextMissionId).classList.add('active');
                if(nextMissionId === 'results') calculateRank();
            }, 300);
        }

        function updateProgress() {
            const progressPercentage = (totalXP / 170) * 100;
            document.getElementById('progressBar').style.width = progressPercentage + "%";
            document.getElementById('currentXP').innerText = totalXP;
        }

        function calculateRank() {
            const title = document.getElementById('rankTitle');
            const desc = document.getElementById('rankDesc');
            const box = document.getElementById('finalRankBox');
            
            if (totalXP >= 150) {
                title.innerText = "æ•˜äº‹ç ´è­¯å¤§å¸« ğŸ§™â€â™‚ï¸";
                desc.innerText = "ç²¾å½©çµ•å€«ï¼ä½ å·²ç¶“å°‡è¾›è‹¦çš„åŠªåŠ›è½‰åŒ–ç‚ºç´”ç²¹çš„çŸ¥è­˜é»ƒé‡‘ã€‚ä½ å°ç´°ç¯€çš„å°ˆæ³¨è®“é€™äº›å–®å­—æˆç‚ºä½ æ€æƒ³çš„ä¸€éƒ¨åˆ†ï¼";
                box.style.borderColor = "#fbbf24";
            } else if (totalXP >= 100) {
                title.innerText = "èªæ„Ÿæ¢éšªå®¶ ğŸ§­";
                desc.innerText = "ä½ çš„å¤§è…¦ç¥ç¶“æ­£åœ¨å¿«é€Ÿé€£çµï¼ä½ å‹‡æ•¢åœ°æ¢ç´¢äº†å……æ»¿æŒ‘æˆ°çš„èªè¨€è’é‡ã€‚ç¹¼çºŒæŒ–æ˜ï¼Œå¯¶è—å°±åœ¨å‰æ–¹ï¼";
                box.style.borderColor = "#10b981";
            } else {
                title.innerText = "çŸ¥è­˜ç¯‰å¤¢è€… ğŸŒ±";
                desc.innerText = "æ¯ä¸€å€‹å°ˆå®¶éƒ½æ›¾ç¶“æ˜¯åˆå­¸è€…ã€‚ä½ çš„å­¸ç¿’ç¨®å­å·²ç¶“æ’­ä¸‹ï¼Œç¾åœ¨éœ€è¦çš„æ˜¯è€å¿ƒçš„çŒæº‰èˆ‡é‡è¤‡ç·´ç¿’ã€‚";
                box.style.borderColor = "#60a5fa";
            }
        }
    </script>
</body>
</html>
